"use strict";(self.webpackChunkbublik_release=self.webpackChunkbublik_release||[]).push([[819],{2384:e=>{e.exports=JSON.parse('{"permalink":"/bublik-release/blog/release-v1.9.0","editUrl":"https://github.com/ts-factory/bublik-release/edit/main/blog/2025-06-19-release-v1.9.0/index.mdx","source":"@site/blog/2025-06-19-release-v1.9.0/index.mdx","title":"Release v1.9.0","description":"Bublik v1.9.0 is a small release that fixes a longstanding issue with database migrations.","date":"2025-06-19T00:00:00.000Z","tags":[{"inline":true,"label":"release","permalink":"/bublik-release/blog/tags/release"}],"readingTime":1.29,"hasTruncateMarker":true,"authors":[{"name":"Kostromin Danil","title":"Bublik UI Maintainer","url":"https://github.com/okt-limonikas","imageURL":"https://github.com/okt-limonikas.png","key":"okt-limonikas","page":null},{"name":"Rybchenko Natalia","title":"Bublik Backend Maintainer","url":"https://github.com/ol-nata","imageURL":"https://github.com/ol-nata.png","key":"ol-nata","page":null}],"frontMatter":{"title":"Release v1.9.0","authors":["okt-limonikas","ol-nata"],"tags":["release"],"slug":"release-v1.9.0"},"unlisted":false,"prevItem":{"title":"Release v1.10.1","permalink":"/bublik-release/blog/release-v1.10.1"},"nextItem":{"title":"Release v1.8.0","permalink":"/bublik-release/blog/release-v1.8.0"}}')},3546:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>r});var t=i(9729);const l={},s=t.createContext(l);function a(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),t.createElement(s.Provider,{value:n},e.children)}},5591:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>c});var t=i(2384),l=i(5813),s=i(3546);const a={title:"Release v1.9.0",authors:["okt-limonikas","ol-nata"],tags:["release"],slug:"release-v1.9.0"},r=void 0,o={authorsImageUrls:[void 0,void 0]},c=[{value:"Admin Section",id:"admin-section",level:2},{value:"Backend Update",id:"backend-update",level:3},{value:"Frontend Update",id:"frontend-update",level:3},{value:"Documentation Update",id:"documentation-update",level:3},{value:"Docker Instance Updatee",id:"docker-instance-updatee",level:3},{value:"Changelog",id:"changelog",level:2},{value:"Backend",id:"backend",level:3},{value:"\ud83d\udce6 Chores",id:"-chores",level:4}];function d(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.p,{children:"Bublik v1.9.0 is a small release that fixes a longstanding issue with database migrations."}),"\n",(0,l.jsx)(n.h2,{id:"admin-section",children:"Admin Section"}),"\n",(0,l.jsx)(n.h3,{id:"backend-update",children:"Backend Update"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Navigate to the backend directory: ",(0,l.jsx)(n.code,{children:"cd bublik"})]}),"\n",(0,l.jsxs)(n.li,{children:["Fetch updates from all remote repositories: ",(0,l.jsx)(n.code,{children:"git remote update"})]}),"\n",(0,l.jsxs)(n.li,{children:["Check out the latest stable release before the new one: ",(0,l.jsx)(n.code,{children:"git checkout v1.8.0"})]}),"\n",(0,l.jsxs)(n.li,{children:["Ensure all migrations are created and applied: ",(0,l.jsx)(n.code,{children:"./scripts/deploy --steps migrate_db"})]}),"\n",(0,l.jsx)(n.li,{children:"\u26a0\ufe0f Backup the database to ensure rollback is possible in case of issues."}),"\n",(0,l.jsx)(n.li,{children:"\u26a0\ufe0f Backup the migrations folder (bublik/data/migrations/), in case they are needed for rollback or comparison."}),"\n",(0,l.jsxs)(n.li,{children:["Delete all migration files from the migrations folder (except \xa0",(0,l.jsx)(n.em,{children:"__init__.py"}),"): ",(0,l.jsx)(n.code,{children:'find . -path "*/bublik/data/migrations/*.py" -not -name "__init__.py" -delete'})]}),"\n",(0,l.jsxs)(n.li,{children:["Check out this release: ",(0,l.jsx)(n.code,{children:"git checkout v1.9.0"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Activate the virtual environment: ",(0,l.jsx)(n.code,{children:"source .env/bin/activate"})]}),"\n",(0,l.jsxs)(n.li,{children:["Delete all migration records from the database: ",(0,l.jsx)(n.code,{children:"python3 manage.py dbshell -- -c 'TRUNCATE \"django_migrations\";'"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Apply migrations without executing SQL (mark as applied): ",(0,l.jsx)(n.code,{children:"python3 manage.py migrate --fake"})]}),"\n",(0,l.jsxs)(n.li,{children:["Restart the services: ",(0,l.jsx)(n.code,{children:"./scripts/deploy --steps run_services"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"frontend-update",children:"Frontend Update"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Trigger the workflow in your frontend repository"}),"\n",(0,l.jsx)(n.li,{children:"Synchronize the mirrors"}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"cd bublik-ui"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"git remote update"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"git checkout v1.9.0"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"documentation-update",children:"Documentation Update"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Trigger the workflow in your frontend repository"}),"\n",(0,l.jsx)(n.li,{children:"Synchronize the mirrors"}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"cd bublik-docs"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"git remote update"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"git checkout v1.9.0"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"docker-instance-updatee",children:"Docker Instance Updatee"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"task backup:create"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"task pull"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"task up"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"task migrations:transition_1.8.0_to_1.9.0"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"task up"})}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"changelog",children:"Changelog"}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h3,{id:"backend",children:"Backend"}),"\n",(0,l.jsx)(n.h4,{id:"-chores",children:"\ud83d\udce6 Chores"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"database:"})," track and commit database migrations in Git (",(0,l.jsx)(n.a,{href:"https://github.com/ts-factory/bublik/commit/c0a469906fd20b7675f4e1142849f41f59f3135c",children:"c0a4699"}),")"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}}}]);