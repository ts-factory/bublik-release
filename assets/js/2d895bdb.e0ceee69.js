"use strict";(self.webpackChunkbublik_release=self.webpackChunkbublik_release||[]).push([[347],{259:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>t});const a=JSON.parse('{"id":"docker/commands","title":"Commands","description":"In docker we mainly wrap Bublik internal commands and provide multiple shortcuts","source":"@site/docs/08-docker/03-commands.md","sourceDirName":"08-docker","slug":"/docker/commands","permalink":"/bublik-release/docker/commands","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Commands"},"sidebar":"defaultSidebar","previous":{"title":"Post Deploy","permalink":"/bublik-release/docker/post-deploy"},"next":{"title":"Build And Publish Images","permalink":"/bublik-release/docker/build"}}');var l=s(5813),i=s(3546);const r={title:"Commands"},c=void 0,o={},t=[{value:"List Of All Commands",id:"list-of-all-commands",level:2},{value:"Summary",id:"summary",level:2},{value:"Managing Containers",id:"managing-containers",level:2},{value:"Create &amp; Remove",id:"create--remove",level:3},{value:"Start &amp; Stop",id:"start--stop",level:3},{value:"Update",id:"update",level:2},{value:"Import &amp; Publish",id:"import--publish",level:2},{value:"Import &amp; Publish Log Archives",id:"import--publish-log-archives",level:3},{value:"Import Log From URL",id:"import-log-from-url",level:3},{value:"Docker Containers",id:"docker-containers",level:2},{value:"Viewing Running Containers",id:"viewing-running-containers",level:3},{value:"Accessing Container Shells",id:"accessing-container-shells",level:3},{value:"Shell Access",id:"shell-access",level:2},{value:"Management",id:"management",level:2},{value:"Delete Run",id:"delete-run",level:3},{value:"Meta Categorization",id:"meta-categorization",level:3},{value:"Backup",id:"backup",level:2}];function d(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.p,{children:["In docker we mainly wrap ",(0,l.jsx)(n.strong,{children:"Bublik"})," internal commands and provide multiple shortcuts ",(0,l.jsx)("br",{})]}),"\n",(0,l.jsx)(n.h2,{id:"list-of-all-commands",children:"List Of All Commands"}),"\n",(0,l.jsx)(n.p,{children:"You can get list of all commands via running:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"task\n"})}),"\n",(0,l.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,l.jsxs)(n.p,{children:["To get description of any command you can run with ",(0,l.jsx)(n.code,{children:"--summary"})," flag:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"task backup:create --summary\n"})}),"\n",(0,l.jsx)(n.h2,{id:"managing-containers",children:"Managing Containers"}),"\n",(0,l.jsx)(n.h3,{id:"create--remove",children:"Create & Remove"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"To create and start containers run:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"task up\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Opposite of ",(0,l.jsx)(n.code,{children:"up"})," is ",(0,l.jsx)(n.code,{children:"down"}),". This will also remove Containers"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"task down\n"})}),"\n",(0,l.jsx)(n.h3,{id:"start--stop",children:"Start & Stop"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"To start stopped containers you can run:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"task start\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"To stop containers you can run:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"task stop\n"})}),"\n",(0,l.jsx)(n.h2,{id:"update",children:"Update"}),"\n",(0,l.jsx)(n.p,{children:"To update to latest version you should run two commands:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# To pull latest images\n# This will pull images depending based on IMAGE_TAG from .env\n# You can also pin IMAGE_TAG to some version\ntask pull\n\n# Once images pulled recreate containers\ntask up\n"})}),"\n",(0,l.jsx)(n.h2,{id:"import--publish",children:"Import & Publish"}),"\n",(0,l.jsx)(n.h3,{id:"import--publish-log-archives",children:"Import & Publish Log Archives"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Publish & Import Local Logs from ",(0,l.jsx)(n.code,{children:"incoming"})," directory:"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"task publish\n"})}),"\n",(0,l.jsxs)(n.ol,{start:"2",children:["\n",(0,l.jsx)(n.li,{children:"Publish & Import Single Log:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Publish and import single log archive\ntask import -- ~/net.tar\n"})}),"\n",(0,l.jsx)(n.h3,{id:"import-log-from-url",children:"Import Log From URL"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Import via API call with ",(0,l.jsx)(n.code,{children:"curl"}),":"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"task import-remote -- <log_url>\n"})}),"\n",(0,l.jsxs)(n.ol,{start:"2",children:["\n",(0,l.jsx)(n.li,{children:"Import via shell from container:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"task import-command -- <log_url>\n"})}),"\n",(0,l.jsx)(n.h2,{id:"docker-containers",children:"Docker Containers"}),"\n",(0,l.jsxs)(n.p,{children:["When you set up Bublik, you'll have multiple running containers. ",(0,l.jsx)("br",{}),"\nTo manage these containers effectively, you can use the following commands:"]}),"\n",(0,l.jsx)(n.h3,{id:"viewing-running-containers",children:"Viewing Running Containers"}),"\n",(0,l.jsx)(n.p,{children:"To get a list of all running containers:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"docker ps\n"})}),"\n",(0,l.jsxs)(n.p,{children:["This command displays all active containers along with information such as their ",(0,l.jsx)(n.code,{children:"CONTAINER ID"}),", ",(0,l.jsx)(n.code,{children:"image"}),", ",(0,l.jsx)(n.code,{children:"status"}),", ",(0,l.jsx)(n.code,{children:"ports"}),", and ",(0,l.jsx)(n.code,{children:"names"}),"."]}),"\n",(0,l.jsx)(n.h3,{id:"accessing-container-shells",children:"Accessing Container Shells"}),"\n",(0,l.jsx)(n.p,{children:"To access a shell inside a specific container:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["First locate the container's ID from the ",(0,l.jsx)(n.code,{children:"CONTAINER ID"})," column in the docker ps output"]}),"\n",(0,l.jsx)(n.li,{children:"Then run"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"docker exec -it <container_id> bash\n"})}),"\n",(0,l.jsx)(n.p,{children:"This command opens an interactive terminal session within the specified container, allowing you to execute commands directly inside it."}),"\n",(0,l.jsxs)(n.p,{children:["Some containers might use a different shell than ",(0,l.jsx)(n.code,{children:"bash"}),". If the above command doesn't work, try using ",(0,l.jsx)(n.code,{children:"sh"})," instead:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"docker exec -it <container_id> sh\n"})}),"\n",(0,l.jsx)(n.p,{children:"For convenience, we provide shortcut to get terminal session inside django container (see below)"}),"\n",(0,l.jsx)(n.h2,{id:"shell-access",children:"Shell Access"}),"\n",(0,l.jsxs)(n.p,{children:["If you can't specify management command or you know what you are doing you can get a shell inside container to run different commands ",(0,l.jsx)("br",{}),"\nThis will drop you into django container shell."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"task shell\n"})}),"\n",(0,l.jsx)(n.p,{children:"Now you can run different commands:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# To trigger meta meta categorization\npython manage.py meta_categorization\n\n# To delete run\npython manage.py delete_run\n"})}),"\n",(0,l.jsx)(n.p,{children:"We also offer some shortcuts"}),"\n",(0,l.jsx)(n.h2,{id:"management",children:"Management"}),"\n",(0,l.jsx)(n.h3,{id:"delete-run",children:"Delete Run"}),"\n",(0,l.jsx)(n.p,{children:"To delete some run you can run:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"task delete-run -- <run_id>\n"})}),"\n",(0,l.jsx)(n.h3,{id:"meta-categorization",children:"Meta Categorization"}),"\n",(0,l.jsx)(n.p,{children:"To trigger meta categorization you can run:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"task meta-categorization\n"})}),"\n",(0,l.jsx)(n.h2,{id:"backup",children:"Backup"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"To create backup of db and logs you can run:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"task backup:create\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"To get list of available backup run:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"task backup:list\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"To restore from backup you can run:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"task backup:restore -- backups/<your_backup_file>\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},3546:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>c});var a=s(9729);const l={},i=a.createContext(l);function r(e){const n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);